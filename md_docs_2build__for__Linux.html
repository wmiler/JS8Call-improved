<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>JS8Call-Improved: Building JS8Call on Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="icon_128.svg"/></td>
  <td id="projectalign">
   <div id="projectname">JS8Call-Improved
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Building JS8Call on Linux</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md0"></a> ...and also building Hamlib.</p>
<p>Note: versions of Qt older than 6.5 are deprecated for building JS8Call 2.4 or newer. Use of Qt 6.8.3 is recommended. While other versions of Qt down to 6.5 are possible to use, there is significant risk that unwanted audio or PTT bugs may be injected into your build. The Qt Group is deprecating use of native audio back ends in favor of standardizing on FFmpeg audio, which requires either PulseAudio or PipeWire on linux. Most linux distributions do not ship with Qt 6.8.3 with proper FFmpeg audio support. Instead of using distribution packaged Qt, you can download pre-built Qt 6.8.3 library packages with FFmpeg audio support built-in <a href="https://github.com/Chris-AC9KH/js8lib/releases/tag/js8lib-2.3">here</a> for both x86_64 and arm64.</p>
<p>Depending on where you install the package (/usr/local/Qt recommended), this will require using <code>-DCMAKE_PREFIX_PATH=&lt;path_to_your_qt_install&gt;</code> for build.</p>
<p>Alternatively, you can obtain Qt 6.8.3 from qt.io by downloading and using the Qt Online Installer and Qt Maintenence Tool to maintain your installed versions of Qt on your linux distribution. Qt is both commercially and open source licensed. This requires creation of a free account on qt.io which will allow access to their download area to get the Online Installer, where you must agree to use the open source license to build JS8Call.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Linux versions</h1>
<p>This file contains build instructions for</p>
<ul>
<li>Debian 12 or newer, or Debian derivatives, e.g., Mint 22.1, Ubuntu 24.04, MX Linux, Raspberry Pi OS (64-bit)</li>
<li>Fedora 41 or newer.</li>
</ul>
<h1><a class="anchor" id="autotoc_md2"></a>
Compile prerequisites</h1>
<h2><a class="anchor" id="autotoc_md3"></a>
Debian &amp; derivatives:</h2>
<p>Issue the following commands in a terminal window (running <code>bash</code> or compatible):</p>
<div class="fragment"><div class="line">sudo apt-get update &amp;&amp;</div>
<div class="line">sudo apt-get install -y build-essential file git cmake \</div>
<div class="line">   libhamlib-dev \</div>
<div class="line">   qt6-base-dev qt6-multimedia-dev qt6-serialport-dev \</div>
<div class="line">   libusb-1.0-0-dev libudev-dev libxkbcommon-dev \</div>
<div class="line">   libfftw3-dev libboost1.81-dev</div>
</div><!-- fragment --><p>If you get &lsquo;Couldn't find any package by glob 'libboost1.81-dev&rsquo;<code>, you need to replace</code>libboost1.81-dev` with another version. To find out which versions are available, issue the command</p>
<div class="fragment"><div class="line">apt-cache search --names-only libboost1 | grep -P &#39;libboost1.\d+\-dev&#39;</div>
</div><!-- fragment --><p>JS8Call has been compiled successfully with <code>libboost1.81-dev</code>, <code>libboost1.83-dev</code>, and <code>libboost1.88-dev</code>.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Fedora:</h2>
<p>Issue the following commands in a terminal window:</p>
<div class="fragment"><div class="line">sudo dnf update &amp;&amp;</div>
<div class="line">sudo dnf install git cmake clang \</div>
<div class="line">  boost-devel fftw-devel libusb1-devel hamlib-devel \</div>
<div class="line">  qt6-qtbase-devel qt6-qtmultimedia-devel qt6-qtserialport-devel \</div>
<div class="line">  libudev-devel rpm-build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5"></a>
Choice of build directory</h1>
<p>To keep everything in one place, we recommend you use a build directory. This can be anywhere. One choice is <code>$HOME/js8-build</code>, which is what is used in the sequel.</p>
<p>Create that directory via</p>
<div class="fragment"><div class="line">mkdir $HOME/js8-build</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Building JS8Call</h1>
<p>To obtain the JS8Call source, issue the following commands in a terminal window:</p>
<div class="fragment"><div class="line">cd $HOME/js8-build &amp;&amp;</div>
<div class="line">git clone https://github.com/js8call/js8call.git</div>
</div><!-- fragment --><p>This creates a new directory <code>$HOME/js8-build/js8call</code> containing the sources.</p>
<p>If you did this earlier and want to update your copy of the sources, there is no need to remove the <code>$HOME/js8-build/js8call</code> directory and start from scratch. Instead, issue</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/js8call &amp;&amp;</div>
<div class="line">git pull --ff-only origin</div>
</div><!-- fragment --><p>For the build itself, issue the following commands in the same terminal window (but read the paragraph that immediately follows first):</p>
<div class="fragment"><div class="line">cd $HOME/js8-build &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp;</div>
<div class="line">cmake -D CMAKE_INSTALL_PREFIX=/opt/js8call ../js8call &amp;&amp;</div>
<div class="line">cmake --build . -- -j 4</div>
</div><!-- fragment --><p>The final <code>-- -j 4</code> part instructs the build to do up to 4 different things in parallel. This is not essential, but speeds up the build process considerably. You can tune this by changing the 4 to some other number. To stay on the safe side, use a number that is less than the total amount of RAM in GByte of the computer that runs the build, and also less than the number of CPU kernels. Other than slowness, it never hurts to use 1. Build instability can result if you use too high a number.</p>
<p>This builds <code>js8call</code> (which takes a while), but does not install it yet. For quick experiments, you can skip that still-missing installation step and run the <code>js8call</code> binary that the build has provided in the <code>build</code> directory:</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/build &amp;&amp;</div>
<div class="line">./js8call</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
Installation</h1>
<p>Note: these instructions only work with versions of JS8Call, 2.3.1 and earlier. CPack was deprecated in the JS8Call project after v2.3.1 and you must consult your distro documentation and use the native tools available in your linux distribution to package a distributable installer.</p>
<h2><a class="anchor" id="autotoc_md8"></a>
Debian-based systems</h2>
<p>Run,</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/build &amp;&amp;</div>
<div class="line">cpack -G DEB</div>
</div><!-- fragment --><p>This produces a package file of the type <code>js8call_*_*.deb</code>, which you can install with the following commands:</p>
<div class="fragment"><div class="line">cp $HOME/js8-build/build/js8call_*_*.deb /var/tmp &amp;&amp;</div>
<div class="line">sudo apt-get install /var/tmp/js8call_*_*.deb &amp;&amp;</div>
<div class="line">rm /var/tmp/js8call_*_*.deb</div>
</div><!-- fragment --><p>The copying ensures that the user <code>apt</code> can read the <code>.deb</code> file, even if <code>$HOME</code> isn't world-readable. While not strictly neccessary, <code>apt-get</code> is happier if this is the case.</p>
<h2><a class="anchor" id="autotoc_md9"></a>
Fedora</h2>
<p>To create the package archive, run</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/build &amp;&amp;</div>
<div class="line">cpack -G RPM</div>
</div><!-- fragment --><p>This leaves you with a file <code>js8call-*.*.rpm</code> which you can install via</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/build &amp;&amp;</div>
<div class="line">sudo dnf install ./js8call-*.*.rpm</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Optional: Building Hamlib</h1>
<p><b>It is not required to compile Hamlib yourself in order to compile JS8Call. It is not required to compile JS8Call to make use of a self-compiled Hamlib.</b></p>
<p>You may want to do compile Hamlib, e.g., if your rig is only supported (or better supported) by a newer version of Hamlib, newer than the one that comes with your distribution.</p>
<p>To obtain the source code of Hamlib, issue the following commands in a terminal window:</p>
<div class="fragment"><div class="line">mkdir -p $HOME/js8-build &amp;&amp;</div>
<div class="line">cd $HOME/js8-build &amp;&amp;</div>
<div class="line">git clone https://github.com/Hamlib/Hamlib.git hamlib &amp;&amp;</div>
<div class="line">cd hamlib</div>
</div><!-- fragment --><p>To see what versions of Hamlib are available, while in the hamlib directory, type <code>git tag</code> to get a list. If, for example, you find a tag <code>4.6.4</code> and want to build that, run (in the same terminal):</p>
<div class="fragment"><div class="line">git switch -c my_build 4.6.4</div>
</div><!-- fragment --><p>So, now we have the source we want to compile. What is needed to do the compilation? Unfortunately, the Hamlib folks do not make it too easy to find that out.</p>
<p>But there's a trick: Simply use whatever prerequisites the version has that comes with your distribution. There is a good chance the compilation of the newer version can thrive on the same diet.</p>
<h2><a class="anchor" id="autotoc_md11"></a>
Getting packages needed to build &lt;tt&gt;hamlib&lt;/tt&gt; on Debian</h2>
<p>For that, see to it that your <code>/etc/apt/sources.list</code> or your <code>/etc/apt/sources.list.d/debian.sources</code> provides not only the binary packages, but also the <b>sources</b> of all packages. In the old format, simply copy every <code>deb</code> line (or at least every <code>deb</code> line that has <code>main</code>), and changing the initial <code>deb</code> to <code>deb-src</code> in your copy. In the new format, look for the <code>Types: deb</code> lines of the stances that have <code>main</code> in the <code>Components:</code> list, and change each such line to <code>Types: deb deb-src</code>.</p>
<p>Now the following incantation will pull in whatever your distribution used to build its version of Hamlib:</p>
<div class="fragment"><div class="line">sudo apt-get update &amp;&amp;</div>
<div class="line">sudo apt-get build-dep hamlib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md12"></a>
Getting packages needed to build &lt;tt&gt;hamlib&lt;/tt&gt; on Fedora</h2>
<div class="fragment"><div class="line">sudo dnf build-dep hamlib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md13"></a>
Build and install Hamlib</h2>
<p>To actually build and install Hamlib to <code>/opt/hamlib-for-js8call</code>:</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/hamlib &amp;&amp;</div>
<div class="line">./bootstrap &amp;&amp;</div>
<div class="line">./configure --prefix=/opt/hamlib-for-js8call &amp;&amp;</div>
<div class="line">make -j 4 &amp;&amp;</div>
<div class="line">sudo make install-strip</div>
</div><!-- fragment --><p>As for the <code>-j 4</code>, the same as above applies. If in doubt (especially while using a modest machine such as a Raspberry Pi), use <code>1</code> or remove the entire <code>-j 4</code> part.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
Back to square one</h2>
<p>If you want to start a new build from a clean slate, it is not necessary to remove the entire <code>hamlib</code> directory and checkout anew. Instead, use this:</p>
<div class="fragment"><div class="line">cd $HOME/js8-build/hamlib &amp;&amp;</div>
<div class="line">git status --ignored --porcelain | perl -wnle &#39;print $2 if m/^(\!\!|\?\?)\s+(.+)$/&#39; | xargs rm -rf</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md15"></a>
How to feed my custom-crafted Hamlib to JS8Call?</h2>
<p><b>It is not necessary to build JS8Call in order to benefit from your newly compiled Hamlib version.</b> You can compile JS8Call if you have a reason to do so. Just wanting a special Hamlib isn't forcing you to do that. You can use any standard <code>js8call</code> binary, including one that you installed from a pre-built package.</p>
<p>Starting <code>js8call</code> in a special way makes it use your custom-crafted Hamlib. That special way is simple: Set an environment variable <code>LD_LIBRARY_PATH</code> to an appropriate value. In a terminal, run</p>
<div class="fragment"><div class="line">export LD_LIBRARY_PATH=/opt/hamlib-for-js8call/lib</div>
</div><!-- fragment --><p>and then start <code>js8call</code> <b>in that same terminal</b>.</p>
<p>To verify which version of <code>hamlib</code> is actually being used, run</p>
<div class="fragment"><div class="line">ldd js8call | grep hamlib</div>
</div><!-- fragment --><p>If you compiled and installed <code>js8call</code> yourself and the terminal's shell doesn't find it (it ought to, though!), you can push its nose at the program by typing the full path <code>/opt/js8call/bin/js8call</code> rather than just <code>js8call</code>.</p>
<h1><a class="anchor" id="autotoc_md16"></a>
Cross-building</h1>
<p>This section is intended for experts and assumes a somewhat advanced level of Linux familiarity. It discusses building for a &ldquo;foreign&rdquo; target Linux distribution, i.e., one that is different from the host Linux distribution that governs the computer running the build.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Docker</h2>
<p>Docker makes it relatively convenient to compile for the same CPU architecture, but another Linux distribution. E.g., use Debian Bookworm to compile for Fedora 42.</p>
<p>Prerequisites:</p>
<ul>
<li>Have Docker up and running on your host computer.</li>
<li>Grab a docker image from <a href="https://hub.docker.com/">https://hub.docker.com/</a> that reflects the desired target distribution, e.g., set <code>image=fedora:42</code> and then do <code>docker pull $image</code></li>
</ul>
<p>Do the <code>git clone</code> part for the JS8Call sources as above if you haven't already. Then:</p>
<div class="fragment"><div class="line">cd $HOME/js8-build &amp;&amp;</div>
<div class="line">docker run --rm --name=js8build-container -ti -v $(pwd):/home/js8-build -w /home/js8-build --entrypoint=/usr/bin/bash $image</div>
</div><!-- fragment --><p>In this terminal, type the stuff that needs <code>sudo</code>, but without the <code>sudo</code>, as you are already <code>root</code> in the container.</p>
<p>In another terminal, run the regular user (non-root) stuff via</p>
<div class="fragment"><div class="line">docker exec -ti -u &quot;$(id -u)&quot; -e HOME=/home -w /home/js8-build js8build-container /usr/bin/bash</div>
</div><!-- fragment --><p>In this terminal, type all commands from the above instructions that do <b>not</b> need <code>sudo</code>.</p>
<p>After you are done with the build and produced the <code>.deb</code> or <code>.rpm</code> installation archive, simply terminate the shell in the <code>docker run</code> terminal. As that Docker container was started with <code>--rm</code>, termination will clean up the container. You will find the installation archive on your host machine at <code>$HOME/js8-build/build</code>.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
Qemu</h2>
<p>This is how to compile for Raspberry Pi without actually using one.</p>
<p>Before starting, obtain an ample supply of patience, as this typically ends up being <em>sloooow</em> (hours).</p>
<p>Basically, the instructions from <a href="https://interrupt.memfault.com/blog/emulating-raspberry-pi-in-qemu">https://interrupt.memfault.com/blog/emulating-raspberry-pi-in-qemu</a> (the part without Docker) work to virtualize a Raspi 3 and run the build on it. As a distribution, Raspi OS <code>2025-05-13-raspios-bookworm-arm64.img</code> from <a href="https://www.raspberrypi.com/software/operating-systems/">https://www.raspberrypi.com/software/operating-systems/</a> can be used.</p>
<p>The following caveats apply:</p>
<ul>
<li>There is some glitch in the console setup, so no log is seen in the terminal running <code>qemu</code>. This does not affect <code>ssh</code> access.</li>
<li>After the <code>qemu-img resize</code> step, <code>gparted</code> can be used to enlarge the second partition, if/as the system doesn't do this automatically on first start.</li>
<li>It is easy to forget <code>losetup -d /dev/loopN</code> before starting <code>qemu</code>. You probably shouldn't.</li>
<li>With just 1GB of RAM for a virtual Raspi, a build with the instructions as above was unstable with <code>-j 4</code>, leading to a <code>qemu</code> crash (eating CPU but no longer responding to <code>ssh</code> connection attempts; this may have triggered some <code>qemu</code> bug?). Removing the entire <code>-- -j 4</code> stance and re-starting the build in a cleaned directory helped.</li>
</ul>
<p>In a separate experiment, it was tried to use <code>qemu-user</code>, <code>qemu-user-binfmt</code>, and <code>chroot</code> (on host Debian Bookworm). An environment for <code>chroot</code> was created via <code>losetup -P --show -f 2025-05-13-raspios-bookworm-arm64.img</code> and mounting <code>loopNp2</code>. It was not even possible to start a humble <code>bash</code> in the <code>chroot</code>-environment, the ubiquitous error message was &ldquo;file not found&rdquo;. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 27 2025 for JS8Call-Improved by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
